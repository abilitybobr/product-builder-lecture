<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ ì  ì¡ê¸° (Catch the Dot)</title>
    <style>
        /* --- ê¸°ë³¸ ì„¤ì • (index.html, oneSecondGame.htmlê³¼ í†µì¼) --- */
        :root {
            --background-color: #0d0c1d;
            --card-color: #161a33;
            --text-color: #e5e5e5;
            --neon-blue: #00bfff;
            --neon-pink: #ff00ff;
            --neon-green: #39ff14;
            --neon-yellow: #fdfd96;
            
            --glow-blue: rgba(0, 191, 255, 0.7);
            --glow-pink: rgba(255, 0, 255, 0.7);
            --glow-green: rgba(57, 255, 20, 0.7);
            --glow-yellow: rgba(253, 253, 150, 0.7);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
                Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            user-select: none;
            position: relative; /* For back button positioning */
        }

        /* --- Back to Main Button --- */
        .back-to-main-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.5);
            color: var(--neon-blue);
            padding: 10px 15px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1rem;
            transition: all 0.2s ease;
            box-shadow: 0 0 8px var(--glow-blue);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .back-to-main-button:hover {
            background: var(--neon-blue);
            color: var(--background-color);
            box-shadow: 0 0 15px var(--glow-blue);
            transform: translateY(-2px);
        }

        .back-to-main-button .arrow-icon {
            font-size: 1.2em;
        }

        #gameContainer {
            width: 100vw;
            height: 100vh;
            position: relative;
            background: var(--card-color); /* Updated to use card color */
            overflow: hidden;
            cursor: crosshair;
            border: 2px solid var(--neon-pink); /* Added border */
            border-radius: 15px; /* Rounded corners */
            box-shadow: 0 0 15px var(--glow-pink); /* Added shadow */
            display: flex; /* Ensure flex for centering screens */
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        /* ê²Œì„ ìƒíƒœ í™”ë©´ */
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            background: rgba(0,0,0,0.8); /* Darker overlay */
            transition: opacity 0.3s;
            border-radius: 15px; /* Match container */
        }

        .screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* íƒ€ì´í‹€ */
        h1 {
            font-size: 3em;
            color: var(--neon-blue); /* Used neon blue */
            margin-bottom: 20px;
            text-shadow: 0 0 10px var(--glow-blue); /* Added neon glow */
        }

        /* ì„¤ëª… í…ìŠ¤íŠ¸ */
        .instruction {
            font-size: 1.3em;
            color: var(--text-color); /* Used text color */
            margin-bottom: 30px;
            text-align: center;
            padding: 0 20px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5); /* Soft glow */
        }

        /* ì‹œì‘ ë²„íŠ¼ */
        .startBtn {
            padding: 15px 40px;
            font-size: 1.5em;
            background: var(--neon-green); /* Used neon green */
            color: var(--background-color); /* Used background color for text */
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 0 15px var(--glow-green); /* Added neon glow */
            transition: transform 0.2s, box-shadow 0.2s;
            text-transform: uppercase;
            font-weight: bold;
        }

        .startBtn:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 0 25px var(--glow-green), inset 0 0 10px var(--glow-green);
        }

        .startBtn:active {
            transform: translateY(0) scale(1);
        }

        /* HUD (ì ìˆ˜ ë° íƒ€ì´ë¨¸) */
        #hud {
            position: absolute;
            top: 20px;
            width: calc(100% - 40px); /* Adjust width */
            padding: 0;
            display: flex;
            justify-content: space-between;
            z-index: 5;
            opacity: 0;
            transition: opacity 0.3s;
        }

        #hud.show {
            opacity: 1;
        }

        .hudItem {
            background: var(--card-color); /* Used card color */
            padding: 10px 20px;
            border-radius: 10px; /* Slightly less rounded */
            font-size: 1.5em;
            font-weight: bold;
            box-shadow: 0 0 10px var(--glow-blue); /* Neon blue glow */
            border: 1px solid var(--neon-blue); /* Neon blue border */
            color: var(--neon-blue); /* Neon blue text */
        }

        #score {
            color: var(--neon-green); /* Neon green for score */
        }

        #timer {
            color: var(--neon-pink); /* Neon pink for timer */
        }

        /* ì›€ì§ì´ëŠ” ì  */
        #dot {
            position: absolute;
            border-radius: 50%;
            background: var(--neon-yellow); /* Used neon yellow */
            box-shadow: 0 0 15px var(--glow-yellow); /* Neon yellow glow */
            cursor: pointer;
            transition: transform 0.1s;
            z-index: 3;
            opacity: 0;
        }

        #dot.show {
            opacity: 1;
        }

        #dot:hover {
            transform: scale(1.1);
            box-shadow: 0 0 25px var(--glow-yellow); /* Enhanced glow on hover */
        }

        #dot.clicked {
            animation: dotClick 0.3s ease-out;
        }

        @keyframes dotClick {
            0% { transform: scale(1); }
            50% { transform: scale(1.5); opacity: 0.5; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* í´ë¦­ íš¨ê³¼ */
        .clickEffect {
            position: absolute;
            pointer-events: none;
            z-index: 2;
            animation: clickRipple 0.6s ease-out forwards;
        }

        @keyframes clickRipple {
            0% {
                width: 0;
                height: 0;
                opacity: 1;
            }
            100% {
                width: 100px;
                height: 100px;
                opacity: 0;
            }
        }

        /* ê²°ê³¼ í™”ë©´ */
        .resultText {
            font-size: 2em;
            color: var(--text-color); /* Used text color */
            margin-bottom: 20px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }

        .finalScore {
            font-size: 4em;
            color: var(--neon-green); /* Used neon green */
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 0 15px var(--glow-green); /* Neon green glow */
        }

        .evaluation {
            font-size: 1.5em;
            color: var(--neon-blue); /* Used neon blue */
            margin-bottom: 30px;
            font-style: italic;
            text-shadow: 0 0 8px var(--glow-blue);
        }

        .bestScore {
            font-size: 1.2em;
            color: var(--text-color); /* Used text color */
            margin-bottom: 30px;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }

        /* ëª¨ë°”ì¼ ëŒ€ì‘ */
        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }

            .instruction {
                font-size: 1.1em;
            }

            .startBtn {
                font-size: 1.2em;
                padding: 12px 30px;
            }

            .hudItem {
                font-size: 1.2em;
                padding: 8px 15px;
            }

            .finalScore {
                font-size: 3em;
            }

            .resultText {
                font-size: 1.5em;
            }

            .evaluation {
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <!-- ë©”ì¸ í˜ì´ì§€ë¡œ ëŒì•„ê°€ëŠ” ë²„íŠ¼ -->
    <a href="../../index.html" class="back-to-main-button">
        <span class="arrow-icon">&lt;</span> ë©”ì¸ìœ¼ë¡œ
    </a>

    <div id="gameContainer">
        <!-- READY í™”ë©´ -->
        <div id="readyScreen" class="screen">
            <h1>ğŸ¯ ì  ì¡ê¸°</h1>
            <p class="instruction">ì›€ì§ì´ëŠ” ì ì„ í´ë¦­í•˜ì„¸ìš”!<br>15ì´ˆ ë™ì•ˆ ìµœëŒ€í•œ ë§ì´ ì¡ìœ¼ì„¸ìš”</p>
            <button class="startBtn" onclick="startGame()">ê²Œì„ ì‹œì‘</button>
        </div>

        <!-- RESULT í™”ë©´ -->
        <div id="resultScreen" class="screen hidden">
            <h1>ğŸ† ê²Œì„ ì¢…ë£Œ</h1>
            <p class="resultText">ì¡ì€ ì  ê°œìˆ˜</p>
            <div class="finalScore" id="finalScore">0</div>
            <div class="evaluation" id="evaluation"></div>
            <div class="bestScore" id="bestScoreDisplay"></div>
            <button class="startBtn" onclick="resetGame()">ë‹¤ì‹œ í•˜ê¸°</button>
        </div>

        <!-- HUD (ì ìˆ˜ ë° íƒ€ì´ë¨¸) -->
        <div id="hud">
            <div class="hudItem">ì ìˆ˜: <span id="score">0</span></div>
            <div class="hudItem">ì‹œê°„: <span id="timer">15</span>s</div>
        </div>

        <!-- ì›€ì§ì´ëŠ” ì  -->
        <div id="dot"></div>
    </div>

    <script>
        // ========== ê²Œì„ ìƒíƒœ ë° ë³€ìˆ˜ ==========
        const GameState = {
            READY: 'READY',
            PLAYING: 'PLAYING',
            RESULT: 'RESULT'
        };

        let currentState = GameState.READY;
        let score = 0;
        let timeLeft = 15;
        let dotSize = 50; // ì´ˆê¸° ì  í¬ê¸°
        let moveInterval = 1000; // ì´ˆê¸° ì´ë™ ê°„ê²© (ms)
        let moveTimer = null;
        let countdownTimer = null;
        let bestScore = localStorage.getItem('catchTheDotBest') || 0;

        // DOM ìš”ì†Œ
        const gameContainer = document.getElementById('gameContainer');
        const readyScreen = document.getElementById('readyScreen');
        const resultScreen = document.getElementById('resultScreen');
        const hud = document.getElementById('hud');
        const dot = document.getElementById('dot');
        const scoreDisplay = document.getElementById('score');
        const timerDisplay = document.getElementById('timer');
        const finalScoreDisplay = document.getElementById('finalScore');
        const evaluationDisplay = document.getElementById('evaluation');
        const bestScoreDisplay = document.getElementById('bestScoreDisplay');

        // í‰ê°€ ë¬¸êµ¬ ë°°ì—´
        const evaluations = [
            "ëˆˆì´ ë¹ ë¥´ë„¤ìš”! ğŸ‘€",
            "ê½¤ ì˜ ì¡ë„¤ìš”? ğŸ¯",
            "ìƒê°ë³´ë‹¤ ì–´ë µì£ ? ğŸ˜…",
            "ë°˜ì‚¬ì‹ ê²½ ì¢‹ì€ë°ìš”! âš¡",
            "ëŒ€ë‹¨í•œ ì§‘ì¤‘ë ¥ì´ì—ìš”! ğŸ”¥",
            "í•œ ë²ˆ ë” í•´ë³¼ë˜ìš”? ğŸ®",
            "ì ì  ë” ë¹¨ë¼ì§€ì£ ? ğŸš€",
            "ë‹¹ì‹ ì€ ì  ì‚¬ëƒ¥ê¾¼! ğŸ¹"
        ];

        // ========== ê²Œì„ ì‹œì‘ ==========
        function startGame() {
            currentState = GameState.PLAYING;
            score = 0;
            timeLeft = 15;
            dotSize = 50;
            moveInterval = 1000;

            // í™”ë©´ ì „í™˜
            readyScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            hud.classList.add('show');
            dot.classList.add('show');

            // UI ì—…ë°ì´íŠ¸
            updateScore();
            updateTimer();

            // ì  ì´ˆê¸° ìœ„ì¹˜ ì„¤ì •
            moveDotToRandomPosition();

            // ì  ì´ë™ ì‹œì‘
            startDotMovement();

            // ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘
            startCountdown();
        }

        // ========== ì  ì´ë™ ë¡œì§ ==========
        function moveDotToRandomPosition() {
            const containerWidth = gameContainer.clientWidth;
            const containerHeight = gameContainer.clientHeight;

            // ì ì´ í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°€ì§€ ì•Šë„ë¡ ì—¬ë°± í™•ë³´
            const margin = dotSize;
            const maxX = containerWidth - dotSize - margin;
            const maxY = containerHeight - dotSize - margin;

            const randomX = Math.random() * maxX + margin;
            const randomY = Math.random() * maxY + margin;

            dot.style.left = randomX + 'px';
            dot.style.top = randomY + 'px';
            dot.style.width = dotSize + 'px';
            dot.style.height = dotSize + 'px';
        }

        function startDotMovement() {
            moveTimer = setInterval(() => {
                moveDotToRandomPosition();
            }, moveInterval);
        }

        function stopDotMovement() {
            clearInterval(moveTimer);
        }

        // ========== íƒ€ì´ë¨¸ ë¡œì§ ==========
        function startCountdown() {
            countdownTimer = setInterval(() => {
                timeLeft--;
                updateTimer();

                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function stopCountdown() {
            clearInterval(countdownTimer);
        }

        // ========== ì  í´ë¦­ ì´ë²¤íŠ¸ ==========
        dot.addEventListener('click', function(e) {
            if (currentState !== GameState.PLAYING) return;

            e.stopPropagation(); // ë°°ê²½ í´ë¦­ ë°©ì§€

            // ì ìˆ˜ ì¦ê°€
            score++;
            updateScore();

            // ë‚œì´ë„ ì¦ê°€ (5ì ë§ˆë‹¤)
            if (score % 5 === 0) {
                increaseDifficulty();
            }

            // í´ë¦­ ì• ë‹ˆë©”ì´ì…˜
            dot.classList.add('clicked');
            setTimeout(() => {
                dot.classList.remove('clicked');
            }, 300);

            // í´ë¦­ íš¨ê³¼ ìƒì„±
            createClickEffect(e.clientX, e.clientY);

            // ì¦‰ì‹œ ìƒˆ ìœ„ì¹˜ë¡œ ì´ë™
            moveDotToRandomPosition();
        });

        // ========== í´ë¦­ íš¨ê³¼ ==========
        function createClickEffect(x, y) {
            const effect = document.createElement('div');
            effect.className = 'clickEffect';
            effect.style.left = (x - 50) + 'px';
            effect.style.top = (y - 50) + 'px';
            effect.style.border = '3px solid #ff6b6b';
            effect.style.borderRadius = '50%';
            
            gameContainer.appendChild(effect);

            setTimeout(() => {
                effect.remove();
            }, 600);
        }

        // ========== ë‚œì´ë„ ì¦ê°€ ==========
        function increaseDifficulty() {
            // ì  í¬ê¸° ê°ì†Œ (ìµœì†Œ 20px)
            if (dotSize > 20) {
                dotSize -= 3;
            }

            // ì´ë™ ì†ë„ ì¦ê°€ (ìµœì†Œ 300ms)
            if (moveInterval > 300) {
                moveInterval -= 50;
                stopDotMovement();
                startDotMovement();
            }
        }

        // ========== UI ì—…ë°ì´íŠ¸ ==========
        function updateScore() {
            scoreDisplay.textContent = score;
        }

        function updateTimer() {
            timerDisplay.textContent = timeLeft;
            
            // ì‹œê°„ì´ 5ì´ˆ ì´í•˜ë©´ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ê°•ì¡°
            if (timeLeft <= 5) {
                timerDisplay.style.color = '#ff6b6b';
            } else {
                timerDisplay.style.color = '#764ba2';
            }
        }

        // ========== ê²Œì„ ì¢…ë£Œ ==========
        function endGame() {
            currentState = GameState.RESULT;

            // íƒ€ì´ë¨¸ ë° ì´ë™ ì¤‘ì§€
            stopCountdown();
            stopDotMovement();

            // ì  ìˆ¨ê¸°ê¸°
            dot.classList.remove('show');
            hud.classList.remove('show');

            // ìµœê³  ì ìˆ˜ ê°±ì‹ 
            if (score > bestScore) {
                bestScore = score;
                localStorage.setItem('catchTheDotBest', bestScore);
            }

            // ê²°ê³¼ í™”ë©´ í‘œì‹œ
            finalScoreDisplay.textContent = score;
            evaluationDisplay.textContent = getRandomEvaluation();
            bestScoreDisplay.textContent = `ìµœê³  ì ìˆ˜: ${bestScore}ì `;
            
            resultScreen.classList.remove('hidden');
        }

        // ========== ëœë¤ í‰ê°€ ë¬¸êµ¬ ==========
        function getRandomEvaluation() {
            const randomIndex = Math.floor(Math.random() * evaluations.length);
            return evaluations[randomIndex];
        }

        // ========== ê²Œì„ ì¬ì‹œì‘ ==========
        function resetGame() {
            currentState = GameState.READY;
            readyScreen.classList.remove('hidden');
            resultScreen.classList.add('hidden');
        }

        // ========== ì´ˆê¸°í™” ==========
        // ìµœê³  ì ìˆ˜ í‘œì‹œ
        if (bestScore > 0) {
            bestScoreDisplay.textContent = `ìµœê³  ì ìˆ˜: ${bestScore}ì `;
        }
    </script>
</body>
</html>