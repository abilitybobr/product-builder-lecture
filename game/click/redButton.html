<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® ë¹¨ê°„ ë²„íŠ¼ ëˆ„ë¥´ì§€ ë§ˆ</title>
    <style>
        /* --- ê¸°ë³¸ ì„¤ì • (index.html, oneSecondGame.htmlê³¼ í†µì¼) --- */
        :root {
            --background-color: #0d0c1d;
            --card-color: #161a33;
            --text-color: #e5e5e5;
            --neon-blue: #00bfff;
            --neon-pink: #ff00ff;
            --neon-green: #39ff14;
            --neon-yellow: #fdfd96;
            
            --glow-blue: rgba(0, 191, 255, 0.7);
            --glow-pink: rgba(255, 0, 255, 0.7);
            --glow-green: rgba(57, 255, 20, 0.7);
            --glow-yellow: rgba(253, 253, 150, 0.7);

            /* Game specific colors */
            --red-button-color: #ff3366; /* Vibrant red for the forbidden button */
            --red-button-glow: rgba(255, 51, 102, 0.8);
            --game-over-text: #ff007f; /* Strong pink for game over */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
                Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            user-select: none;
            position: relative; /* For back button positioning */
        }

        /* --- Back to Main Button --- */
        .back-to-main-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.5);
            color: var(--neon-blue);
            padding: 10px 15px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1rem;
            transition: all 0.2s ease;
            box-shadow: 0 0 8px var(--glow-blue);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .back-to-main-button:hover {
            background: var(--neon-blue);
            color: var(--background-color);
            box-shadow: 0 0 15px var(--glow-blue);
            transform: translateY(-2px);
        }

        .back-to-main-button .arrow-icon {
            font-size: 1.2em;
        }

        /* --- Game Container --- */
        #gameContainer {
            width: 100%;
            height: 100vh;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        /* --- Score Board --- */
        #scoreBoard {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--card-color);
            padding: 15px 40px;
            border-radius: 20px;
            box-shadow: 0 0 15px var(--glow-green);
            border: 2px solid var(--neon-green);
            z-index: 100;
        }

        #currentScore {
            font-size: 2.2em;
            font-weight: bold;
            color: var(--neon-green);
            text-align: center;
            text-shadow: 0 0 8px var(--glow-green);
        }

        #bestScore {
            font-size: 1em;
            color: var(--text-color);
            margin-top: 5px;
            text-align: center;
            text-shadow: 0 0 3px rgba(255, 255, 255, 0.3);
        }

        /* --- Message --- */
        #message {
            font-size: 2.8em;
            font-weight: bold;
            color: var(--neon-pink);
            text-shadow: 
                0 0 5px var(--glow-pink),
                0 0 10px var(--glow-pink),
                0 0 20px var(--glow-pink);
            text-align: center;
            padding: 20px;
            animation: pulse 2s infinite alternate;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        /* --- Button Container --- */
        #buttonContainer {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }

        /* --- Game Button Style --- */
        .gameButton {
            position: absolute;
            padding: 18px 35px;
            font-size: 1.2em;
            font-weight: bold;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 0 10px rgba(0, 191, 255, 0.5); /* Default blue glow */
            animation: fadeIn 0.3s ease;
            color: var(--background-color); /* Text color for safe buttons */
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }

        .gameButton:hover {
            transform: scale(1.08);
            box-shadow: 0 0 20px var(--glow-blue);
        }

        .gameButton:active {
            transform: scale(0.95);
        }

        /* Red Button specific styles */
        .gameButton[data-is-red="true"] {
            background: var(--red-button-color); /* Use CSS variable */
            color: white;
            box-shadow: 0 0 15px var(--red-button-glow);
            text-shadow: 0 0 5px rgba(255,255,255,0.7);
        }

        .gameButton[data-is-red="true"]:hover {
            box-shadow: 0 0 25px var(--red-button-glow);
            transform: scale(1.08) rotate(2deg);
        }

        /* --- Game Over Screen --- */
        #gameOverScreen {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            justify-content: center;
            align-items: center;
            flex-direction: column;
            z-index: 200;
            animation: fadeInScreen 0.5s ease;
        }

        @keyframes fadeInScreen {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        #gameOverMessage {
            font-size: 3.5em;
            font-weight: bold;
            color: var(--game-over-text);
            margin-bottom: 30px;
            text-shadow: 
                0 0 10px var(--game-over-text),
                0 0 20px var(--game-over-text);
            animation: shake 0.5s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-15px) rotate(-3deg); }
            75% { transform: translateX(15px) rotate(3deg); }
        }

        #finalScore {
            font-size: 2.5em;
            color: var(--neon-yellow);
            margin-bottom: 40px;
            text-shadow: 0 0 10px var(--glow-yellow);
        }

        #restartButton {
            padding: 15px 50px;
            font-size: 1.5em;
            font-weight: bold;
            background: var(--neon-blue);
            color: var(--background-color);
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 0 15px var(--glow-blue);
            transition: all 0.3s ease;
            text-transform: uppercase;
        }

        #restartButton:hover {
            transform: scale(1.1);
            background: #fff;
            box-shadow: 0 0 25px #fff;
        }

        /* --- FadeOut animation (moved from JS) --- */
        @keyframes fadeOut {
            to {
                opacity: 0;
                transform: scale(0.5);
            }
        }

        /* --- ë°˜ì‘í˜• ë””ìì¸ --- */
        @media (max-width: 768px) {
            #message {
                font-size: 1.8em;
            }

            #scoreBoard {
                padding: 10px 20px;
            }
            #currentScore {
                font-size: 1.8em;
            }
            #bestScore {
                font-size: 0.9em;
            }

            .gameButton {
                padding: 12px 25px;
                font-size: 1em;
                border-radius: 10px;
            }

            #gameOverMessage {
                font-size: 2.5em;
            }

            #finalScore {
                font-size: 1.8em;
            }
            #restartButton {
                padding: 10px 30px;
                font-size: 1.2em;
            }
            .back-to-main-button {
                top: 10px;
                left: 10px;
                padding: 8px 12px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            #message {
                font-size: 1.5em;
            }
            #gameOverMessage {
                font-size: 2em;
            }
            #finalScore {
                font-size: 1.5em;
            }
            .gameButton {
                padding: 10px 20px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <!-- ë©”ì¸ í˜ì´ì§€ë¡œ ëŒì•„ê°€ëŠ” ë²„íŠ¼ -->
    <a href="../../index.html" class="back-to-main-button">
        <span class="arrow-icon">&lt;</span> ë©”ì¸ìœ¼ë¡œ
    </a>

    <div id="gameContainer">
        <!-- ì ìˆ˜íŒ -->
        <div id="scoreBoard">
            <div id="currentScore">ì ìˆ˜: 0</div>
            <div id="bestScore">ìµœê³  ì ìˆ˜: 0</div>
        </div>

        <!-- ì•ˆë‚´ ë©”ì‹œì§€ -->
        <div id="message">ë¹¨ê°„ ë²„íŠ¼ë§Œ ëˆ„ë¥´ì§€ ë§ˆì„¸ìš”!</div>

        <!-- ë²„íŠ¼ ì»¨í…Œì´ë„ˆ -->
        <div id="buttonContainer"></div>

        <!-- ê²Œì„ ì˜¤ë²„ í™”ë©´ -->
        <div id="gameOverScreen">
            <div id="gameOverMessage">ì™œ ëˆŒë €ì–´ìš”? ğŸ˜¤</div>
            <div id="finalScore">ìµœì¢… ì ìˆ˜: 0</div>
            <button id="restartButton">ë‹¤ì‹œ ë„ì „</button>
        </div>
    </div>

    <script>
        // ========== ê²Œì„ ìƒíƒœ ê´€ë¦¬ ==========
        const GameState = {
            READY: 'ready',
            PLAYING: 'playing',
            GAME_OVER: 'gameover'
        };

        let currentState = GameState.READY;
        let score = 0;
        let bestScore = localStorage.getItem('redButtonBestScore') || 0; // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í‚¤ ë³€ê²½

        // ========== DOM ìš”ì†Œ ==========
        const message = document.getElementById('message');
        const buttonContainer = document.getElementById('buttonContainer');
        const scoreBoard = document.getElementById('scoreBoard');
        const currentScoreEl = document.getElementById('currentScore');
        const bestScoreEl = document.getElementById('bestScore');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const gameOverMessage = document.getElementById('gameOverMessage');
        const finalScoreEl = document.getElementById('finalScore');
        const restartButton = document.getElementById('restartButton');

        // ========== ë²„íŠ¼ í…ìŠ¤íŠ¸ ì˜µì…˜ ==========
        const safeButtonTexts = [
            'ì•ˆì „', 'ì—¬ê¸°!', 'í´ë¦­', 'ì •ë‹µ', 'ì´ê±´ ì•„ë‹˜', 
            'ì—¬ê¸°ë¡œ', 'ëˆŒëŸ¬ë´', 'OK', 'í†µê³¼', 'ê´œì°®ì•„',
            'ì´ê±°ë‹¤', 'ë§ì•„', 'ì—¬ê¸°ì•¼', 'í´ë¦­í•´', 'ì„ íƒ'
        ];

        const redButtonTexts = [
            'ê¸ˆì§€', 'ìœ„í—˜', 'ì ˆëŒ€ ê¸ˆì§€', 'NO', 'ğŸš«',
            'ëˆ„ë¥´ì§€ë§ˆ', 'ë¹¨ê°•', 'STOP', 'âŒ', 'ì£¼ì˜'
        ];

        const gameOverMessages = [
            'ì™œ ëˆŒë €ì–´ìš”? ğŸ˜¤',
            'ì—­ì‹œ ì¸ê°„... ğŸ™„',
            'ì°¸ì„ ìˆ˜ ì—†ì—ˆêµ°ìš” ğŸ˜',
            'í˜¸ê¸°ì‹¬ì´ ê³¼í–ˆì–´ìš” ğŸ¤¦',
            'ë§ë ¸ì–ì•„ìš”! ğŸ˜ ',
            'ê·¸ëŸ´ ì¤„ ì•Œì•˜ì–´ ğŸ˜Œ'
        ];

        // ========== ê²Œì„ ì´ˆê¸°í™” ==========
        function initGame() {
            score = 0;
            currentState = GameState.READY;
            updateScore();
            message.style.display = 'block';
            message.textContent = 'ë¹¨ê°„ ë²„íŠ¼ë§Œ ëˆ„ë¥´ì§€ ë§ˆì„¸ìš”!';
            gameOverScreen.style.display = 'none';
            buttonContainer.innerHTML = '';

            // 1ì´ˆ í›„ ê²Œì„ ì‹œì‘
            setTimeout(startGame, 1500);
        }

        // ========== ê²Œì„ ì‹œì‘ ==========
        function startGame() {
            currentState = GameState.PLAYING;
            message.style.display = 'none';
            createButtons();
        }

        // ========== ë²„íŠ¼ ìƒì„± ë¡œì§ ==========
        function createButtons() {
            // ê¸°ì¡´ ë²„íŠ¼ ì œê±°
            buttonContainer.innerHTML = '';

            // ë‚œì´ë„ì— ë”°ë¥¸ ë²„íŠ¼ ê°œìˆ˜ ê²°ì • (3~6ê°œ)
            const minButtons = 3;
            const maxButtons = Math.min(6, 3 + Math.floor(score / 5));
            const buttonCount = Math.floor(Math.random() * (maxButtons - minButtons + 1)) + minButtons;

            // ë¹¨ê°„ ë²„íŠ¼ ìœ„ì¹˜ ëœë¤ ê²°ì •
            const redButtonIndex = Math.floor(Math.random() * buttonCount);

            // ë²„íŠ¼ ìƒì„±
            const rootStyle = getComputedStyle(document.documentElement);
            const safeButtonColors = [
                rootStyle.getPropertyValue('--neon-blue'),
                rootStyle.getPropertyValue('--neon-green'),
                rootStyle.getPropertyValue('--neon-yellow'),
                rootStyle.getPropertyValue('--neon-pink')
            ];

            for (let i = 0; i < buttonCount; i++) {
                const button = document.createElement('button');
                button.className = 'gameButton';
                button.dataset.isRed = (i === redButtonIndex).toString(); // data-is-red ì†ì„± ì‚¬ìš©

                if (button.dataset.isRed === 'true') {
                    // ë¹¨ê°„ ë²„íŠ¼ì€ CSS í´ë˜ìŠ¤ë¡œ ìŠ¤íƒ€ì¼ë§. JSì—ì„œëŠ” í…ìŠ¤íŠ¸ë§Œ ì„¤ì •.
                    button.textContent = redButtonTexts[Math.floor(Math.random() * redButtonTexts.length)];
                } else {
                    // ì•ˆì „í•œ ë²„íŠ¼ ì„¤ì •
                    button.style.background = safeButtonColors[Math.floor(Math.random() * safeButtonColors.length)];
                    button.textContent = safeButtonTexts[Math.floor(Math.random() * safeButtonTexts.length)];
                }

                // ëœë¤ ìœ„ì¹˜ ì„¤ì • (í™”ë©´ ê°€ì¥ìë¦¬ ì—¬ë°± ê³ ë ¤)
                const margin = 100;
                const maxX = window.innerWidth - margin - 150;
                const maxY = window.innerHeight - margin - 150;
                
                button.style.left = `${Math.random() * maxX + margin/2}px`;
                button.style.top = `${Math.random() * maxY + margin}px`;

                // í´ë¦­ ì´ë²¤íŠ¸
                button.addEventListener('click', handleButtonClick);

                buttonContainer.appendChild(button);
            }
        }

        // ========== ë²„íŠ¼ í´ë¦­ ì²˜ë¦¬ ==========
        function handleButtonClick(event) {
            if (currentState !== GameState.PLAYING) return;

            const button = event.target;
            const isRed = button.dataset.isRed === 'true';

            if (isRed) {
                // ë¹¨ê°„ ë²„íŠ¼ í´ë¦­ - ê²Œì„ ì˜¤ë²„
                gameOver();
            } else {
                // ì•ˆì „í•œ ë²„íŠ¼ í´ë¦­ - ì ìˆ˜ ì¦ê°€
                score++;
                updateScore();
                
                // ë²„íŠ¼ ì œê±° ì• ë‹ˆë©”ì´ì…˜
                button.style.animation = 'fadeOut 0.2s ease forwards'; // 'forwards' ì¶”ê°€
                setTimeout(() => {
                    createButtons();
                }, 200);
            }
        }

        // ========== ì ìˆ˜ ì—…ë°ì´íŠ¸ ==========
        function updateScore() {
            currentScoreEl.textContent = `ì ìˆ˜: ${score}`;
            bestScoreEl.textContent = `ìµœê³  ì ìˆ˜: ${bestScore}`;
        }

        // ========== ê²Œì„ ì˜¤ë²„ ==========
        function gameOver() {
            currentState = GameState.GAME_OVER;
            buttonContainer.innerHTML = '';

            // ìµœê³  ì ìˆ˜ ê°±ì‹ 
            if (score > bestScore) {
                bestScore = score;
                localStorage.setItem('redButtonBestScore', bestScore); // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í‚¤ ë³€ê²½
            }

            // ê²Œì„ ì˜¤ë²„ ë©”ì‹œì§€ ëœë¤ ì„ íƒ
            gameOverMessage.textContent = gameOverMessages[Math.floor(Math.random() * gameOverMessages.length)];
            finalScoreEl.textContent = `ìµœì¢… ì ìˆ˜: ${score}`;

            // ê²Œì„ ì˜¤ë²„ í™”ë©´ í‘œì‹œ
            gameOverScreen.style.display = 'flex';
        }

        // ========== ì¬ì‹œì‘ ë²„íŠ¼ ==========
        restartButton.addEventListener('click', initGame);

        // ========== ê²Œì„ ì‹œì‘ ==========
        bestScoreEl.textContent = `ìµœê³  ì ìˆ˜: ${bestScore}`;
        initGame();
    </script>
</body>
</html>